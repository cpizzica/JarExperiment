<!DOCTYPE html>
<html>
  <head>
    <script src="C:\Users\Chris\Documents\JarExperiment/jspsych.js"></script>
    <script src="C:\Users\Chris\Documents\JarExperiment/js/fabric.js"> </script>
    <script src="C:\Users\Chris\Documents\JarExperiment/plugins/jspsych-image-button-response.js"></script>
    <link rel="stylesheet" href="C:\Users\Chris\Documents\JarExperiment/css/jspsych.css"></link>
    <style>
      img { width: 300px; }
    </style>
  </head>
  <body><canvas id="c" width="700" height="700" style="border:1px solid;">
          <img src="C:\Users\Chris\Documents\JarExperiment/images/masonjar.jpg" id="my-image">

</canvas></body>
  
  <script>
var coinresult = []
// create a wrapper around native canvas element (with id="c")
var canvas = new fabric.Canvas('c');

// create a rectangle object
var imgElement = document.getElementById('my-image');
var imgInstance = new fabric.Image(imgElement, {
  left: 200,
  top: 200,
  angle: 0,
  opacity: 1.0
});
      
var ball = new fabric.Circle({
	radius: 10,
  fill: 'black',
  left: 300,
  top: 300,
});

var ScreenText = new fabric.Text('Balls Drawn:', {left: 0, top: 550})      
canvas.add (ball, imgInstance, ScreenText)

var flip = function () {
coinresult = Math.floor(Math.random() * 2);
}
var ResultsAnimation = function () {
    if(coinresult == 0){
        ball.set({fill: 'blue'})}
        else{
            ball.set({fill: 'red'})
        }
    do{
        ball.animate('top', 100,
    {onChange: canvas.renderAll.bind(canvas), 
    duration: 500})
    ball.set({top:100})
    }
    while(ball.get('top') == 300)
    }
var ReverseAnimation = function () {
    ball.animate('top', 300,
                 {onChange: canvas.renderAll.bind(canvas),
                duration: 500})
}    

flip()
ResultsAnimation()
setTimeout(ReverseAnimation, 1000)      
</script>
</html>