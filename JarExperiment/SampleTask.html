<!DOCTYPE html>
<html>
<head>
  <script src="C:/Users/Chris/Documents/JarExperiment/jspsych.js"></script>
  <script src="C:/Users/Chris/Documents/JarExperiment/plugins/jspsych-canvas-keyboard-response.js"></script>
      <script src="C:/Users/Chris/Documents/JarExperiment/plugins/jspsych-image-keyboard-response.js"></script>

  <script src="C:\Users\Chris\Documents\JarExperiment/js/fabric.js"> </script>
  <link rel="stylesheet" href="C:\Users\Chris\Documents\JarExperiment/css/jspsych.css"></link>
  <style>
    img {
      width: 300px;
    }
  </style>
</head>
<body>   </body>
<script>
    var coinresultarray = [];
    var colorresultarray = [];
    var trial_number = 0;

    // Will be used to shuffle jar choice, ball sequence, block sequence

    ////////////
var ball_drawing_trials = [1, 2, 5]    
var ball_drawing_sequence = jsPsych.randomization.repeat(ball_drawing_trials, 3);
    console.log(ball_drawing_sequence)
    
var timeline = []

  var trial = {
    type: 'canvas-keyboard-response',
    stimulus: ['masonjar.jpg'],
    choices: jsPsych.NO_KEYS,
    trial_duration: 2000,
    prompt: '<p>No response allowed</p>',
  	on_finish: function(){
  		  coinresultarray += coinresult
          if (coinresult === 1){
              colorresultarray.push("red")}
              else {
                  colorresultarray.push("blue")
              }
        trial_number += 1
        console.log(trial_number)
          }
    }
  
  
  var test_trial = {
      type: 'image-keyboard-response',
      stimulus: ['2R18BSlide.png'],
      stimulus_height: 400,
      stimulus_width: 650,
      choices: ['d', 'k'],
      prompt: '<p>Press the d key for left and k key for right</p>'
  }
  
  ///The sequence is how many times a ball is drawn in a row. Nests with a test trial
    var first_sequence = {
		  timeline: [trial],
		  repetitions: ball_drawing_sequence[0]
	  }
    ///Combination of balls being drawn and a test trial. Pushed to highest timeline node.
    var first_trial_sequence = {
        timeline: [first_sequence, test_trial]
    }
    
    timeline.push(first_trial_sequence)
  
  jsPsych.init({
    timeline: timeline,
       on_data_update: function(data){
           jsPsych.data.get().addToLast({coinresultarray: coinresultarray});
           jsPsych.data.get().addToLast({colorresultarray: colorresultarray})
           console.log(coinresultarray)
       },
    on_finish: function() {
      jsPsych.data.displayData();
    },
    default_iti: 0
  });
</script>
 <img src="C:\Users\Chris\Documents\JarExperiment/images/masonjar.jpg" id="my-image" hidden>
</html>
